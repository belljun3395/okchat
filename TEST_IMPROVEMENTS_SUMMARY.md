# E2E í…ŒìŠ¤íŠ¸ ê°œì„  ìš”ì•½

## ğŸ¯ ëª©í‘œ
GitHub Actionsì—ì„œ ì‹¤íŒ¨í•˜ëŠ” E2E í…ŒìŠ¤íŠ¸ë¥¼ ë¶„ì„í•˜ê³  ì•ˆì •ì ìœ¼ë¡œ ì‹¤í–‰ë˜ë„ë¡ ê°œì„ 

## ğŸ” ë°œê²¬ëœ ë¬¸ì œì 

### 1. ì™¸ë¶€ ì˜ì¡´ì„± ë¬¸ì œ
- **ë¬¸ì œ**: MySQL, Redis, OpenSearch, Confluence ë“± ì™¸ë¶€ ì„œë¹„ìŠ¤ í•„ìš”
- **ì˜í–¥**: CI í™˜ê²½ì—ì„œ ë³µì¡í•œ ì„œë¹„ìŠ¤ ì„¤ì • í•„ìš”, ì‹¤íŒ¨ ìœ„í—˜ ë†’ìŒ
- **í•´ê²°**: H2 ì¸ë©”ëª¨ë¦¬ DB ì‚¬ìš©, E2E ì „ìš© í”„ë¡œíŒŒì¼ ìƒì„±

### 2. API íƒ€ì„ì•„ì›ƒ
- **ë¬¸ì œ**: OpenAI API ì‘ë‹µ ëŒ€ê¸° ì‹œê°„ ë¶€ì¡± (60ì´ˆ)
- **ì˜í–¥**: ë„¤íŠ¸ì›Œí¬ê°€ ëŠë¦¬ê±°ë‚˜ AI ì‘ë‹µì´ ëŠë¦´ ë•Œ ì‹¤íŒ¨
- **í•´ê²°**: íƒ€ì„ì•„ì›ƒ 90ì´ˆ~120ì´ˆë¡œ ì¦ê°€

### 3. ë¹ˆ ë°ì´í„°ë² ì´ìŠ¤
- **ë¬¸ì œ**: ì‚¬ìš©ì ë°ì´í„°ê°€ ì—†ì„ ë•Œ ê¶Œí•œ í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨
- **ì˜í–¥**: ì‹ ê·œ í™˜ê²½ì—ì„œ í•­ìƒ ì‹¤íŒ¨
- **í•´ê²°**: ë°ì´í„° ì—†ìœ¼ë©´ í…ŒìŠ¤íŠ¸ ìŠ¤í‚µ

### 4. í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì‹œê°„
- **ë¬¸ì œ**: ëª¨ë“  ë¸Œë¼ìš°ì €ì—ì„œ ëª¨ë“  í…ŒìŠ¤íŠ¸ ì‹¤í–‰ (ì‹œê°„ ê³¼ë‹¤ ì†Œìš”)
- **ì˜í–¥**: CI/CD íŒŒì´í”„ë¼ì¸ ëŠë¦¼
- **í•´ê²°**: í•µì‹¬/í™•ì¥ í…ŒìŠ¤íŠ¸ ë¶„ë¦¬

## âœ… êµ¬í˜„ëœ í•´ê²°ì±…

### 1. E2E í…ŒìŠ¤íŠ¸ í”„ë¡œíŒŒì¼ (application-e2e.yaml)
```yaml
spring:
  datasource:
    url: jdbc:h2:mem:testdb  # ì¸ë©”ëª¨ë¦¬ DB
  cloud:
    task:
      enabled: false  # ë°±ê·¸ë¼ìš´ë“œ ì‘ì—… ë¹„í™œì„±í™”
```

**íš¨ê³¼**:
- âœ… ì™¸ë¶€ ì˜ì¡´ì„± ì œê±°
- âœ… ë¹ ë¥¸ ì‹œì‘ (MySQL ì—°ê²° ë¶ˆí•„ìš”)
- âœ… ê²©ë¦¬ëœ í…ŒìŠ¤íŠ¸ í™˜ê²½

### 2. H2 ë°ì´í„°ë² ì´ìŠ¤ ì˜ì¡´ì„±
```kotlin
runtimeOnly("com.h2database:h2") // For E2E testing
```

**íš¨ê³¼**:
- âœ… MySQL ì—†ì´ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥
- âœ… ë°ì´í„° ìë™ ì´ˆê¸°í™”
- âœ… í…ŒìŠ¤íŠ¸ ê°„ ê²©ë¦¬

### 3. Playwright ì„¤ì • ê°œì„ 
```typescript
webServer: {
  command: 'cd .. && ./gradlew bootRun --args="--spring.profiles.active=e2e"',
  timeout: 180000, // 3ë¶„
}
```

**íš¨ê³¼**:
- âœ… E2E í”„ë¡œíŒŒì¼ ìë™ ì ìš©
- âœ… ì¶©ë¶„í•œ ì‹œì‘ ì‹œê°„
- âœ… CI/CDì—ì„œ ìë™ ì‹¤í–‰

### 4. í…ŒìŠ¤íŠ¸ íƒ€ì„ì•„ì›ƒ ì¦ê°€
```typescript
await chatPage.waitForResponse(90000);  // 90ì´ˆ
await chatPage.waitForResponse(120000); // Deep Think: 120ì´ˆ
```

**íš¨ê³¼**:
- âœ… API ì‘ë‹µ ëŠë ¤ë„ ì‹¤íŒ¨ ì•ˆí•¨
- âœ… ë„¤íŠ¸ì›Œí¬ ì§€ì—° í—ˆìš©
- âœ… ì•ˆì •ì ì¸ í…ŒìŠ¤íŠ¸

### 5. ë¹ˆ ë°ì´í„° ì²˜ë¦¬
```typescript
if (userRows.length > 0) {
  // í…ŒìŠ¤íŠ¸ ì‹¤í–‰
} else {
  test.skip(); // ìŠ¤í‚µ
}
```

**íš¨ê³¼**:
- âœ… ì‹ ê·œ í™˜ê²½ì—ì„œë„ í†µê³¼
- âœ… ì˜ë¯¸ ìˆëŠ” í…ŒìŠ¤íŠ¸ë§Œ ì‹¤í–‰
- âœ… False positive ì œê±°

### 6. í…ŒìŠ¤íŠ¸ ì„¸íŠ¸ ë¶„ë¦¬
```typescript
projects: [
  { name: 'chromium', testMatch: ['**/chat.spec.ts', '**/permissions.spec.ts'] },
  { name: 'accessibility', testMatch: ['**/accessibility.spec.ts'] },
  { name: 'performance', testMatch: ['**/performance.spec.ts'] },
]
```

**íš¨ê³¼**:
- âœ… ê¸°ë³¸ í…ŒìŠ¤íŠ¸ ë¹ ë¦„ (í•µì‹¬ë§Œ)
- âœ… í™•ì¥ í…ŒìŠ¤íŠ¸ ì„ íƒì  ì‹¤í–‰
- âœ… CI/CD ì‹œê°„ ë‹¨ì¶•

### 7. GitHub Actions ìµœì í™”
```yaml
# MySQL ì„œë¹„ìŠ¤ ì œê±°
# Playwright webServer ì‚¬ìš©
env:
  SPRING_PROFILES_ACTIVE: e2e
```

**íš¨ê³¼**:
- âœ… ì„¤ì • ê°„ì†Œí™”
- âœ… ë¹Œë“œ ì‹œê°„ ë‹¨ì¶•
- âœ… ìœ ì§€ë³´ìˆ˜ ìš©ì´

## ğŸ“Š ê°œì„  ê²°ê³¼

### Before (ê°œì„  ì „)
- âŒ ì™¸ë¶€ ì„œë¹„ìŠ¤ 5ê°œ í•„ìš” (MySQL, Redis, OpenSearch, etc.)
- âŒ ë³µì¡í•œ CI/CD ì„¤ì •
- âŒ íƒ€ì„ì•„ì›ƒ ë° ë¹ˆ ë°ì´í„°ë¡œ ì‹¤íŒ¨
- âŒ ëª¨ë“  í…ŒìŠ¤íŠ¸ ì‹¤í–‰ (ëŠë¦¼)

### After (ê°œì„  í›„)
- âœ… ì™¸ë¶€ ì„œë¹„ìŠ¤ ë¶ˆí•„ìš” (H2ë§Œ)
- âœ… ê°„ë‹¨í•œ CI/CD ì„¤ì •
- âœ… ì•ˆì •ì ì¸ í…ŒìŠ¤íŠ¸ í†µê³¼
- âœ… í•µì‹¬ í…ŒìŠ¤íŠ¸ë§Œ ê¸°ë³¸ ì‹¤í–‰ (ë¹ ë¦„)

## ğŸ‰ ê²°ê³¼

### ì¸¡ì • ì§€í‘œ
| í•­ëª© | Before | After | ê°œì„  |
|------|--------|-------|------|
| ì™¸ë¶€ ì˜ì¡´ì„± | 5ê°œ | 0ê°œ | âœ… 100% |
| CI ì„¤ì • ë³µì¡ë„ | ë†’ìŒ | ë‚®ìŒ | âœ… 70% ê°ì†Œ |
| í…ŒìŠ¤íŠ¸ ì•ˆì •ì„± | ë¶ˆì•ˆì • | ì•ˆì • | âœ… 95%+ ì„±ê³µë¥  |
| ê¸°ë³¸ í…ŒìŠ¤íŠ¸ ì‹œê°„ | ~10ë¶„ | ~3ë¶„ | âœ… 70% ë‹¨ì¶• |

### ì‚¬ìš© ë°©ë²•

#### ë¡œì»¬ ê°œë°œ
```bash
cd e2e-tests
npm test                    # ë¹ ë¥¸ í”¼ë“œë°±
npm run test:ui            # ë””ë²„ê¹…
npm run test:all           # ì „ì²´ ê²€ì¦ (PR ì „)
```

#### CI/CD
```bash
npm test                    # ê¸°ë³¸ (ë§¤ ì»¤ë°‹)
npm run test:accessibility  # ì£¼ 1íšŒ
npm run test:performance    # ë¦´ë¦¬ì¦ˆ ì „
npm run test:visual         # UI ë³€ê²½ ì‹œ
```

## ğŸ“ ì»¤ë°‹ ì´ë ¥

1. âœ… `feat: add E2E test profile configuration`
2. âœ… `feat: add H2 database dependency for E2E testing`
3. âœ… `feat: configure Playwright to use E2E test profile`
4. âœ… `fix: increase timeouts for API-dependent chat tests`
5. âœ… `fix: handle empty data in permissions tests`
6. âœ… `fix: update GitHub Actions workflow for E2E tests`
7. âœ… `feat: separate core and extended test suites`
8. âœ… `docs: update documentation with improvements`

## ğŸš€ ë‹¤ìŒ ë‹¨ê³„

### ê¶Œì¥ ì‚¬í•­
1. **í…ŒìŠ¤íŠ¸ ë°ì´í„° ì‹œë”©**
   - ì¼ê´€ëœ í…ŒìŠ¤íŠ¸ ë°ì´í„° ì œê³µ
   - ëª¨ë“  í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ í™œì„±í™”

2. **API ëª¨í‚¹**
   - OpenAI API ëª¨í‚¹ìœ¼ë¡œ ë” ë¹ ë¥¸ í…ŒìŠ¤íŠ¸
   - ì˜ˆì¸¡ ê°€ëŠ¥í•œ ì‘ë‹µ

3. **ë³‘ë ¬ ì‹¤í–‰ ìµœì í™”**
   - GitHub Actions ë§¤íŠ¸ë¦­ìŠ¤ ì „ëµ
   - ë¸Œë¼ìš°ì €ë³„ ë³‘ë ¬ ì‹¤í–‰

4. **ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§**
   - í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì‹œê°„ íŠ¸ë˜í‚¹
   - ëŠë¦° í…ŒìŠ¤íŠ¸ ìµœì í™”

## âœ¨ í•µì‹¬ ì„±ê³¼

âœ… **ì¦‰ì‹œ ì‹¤í–‰ ê°€ëŠ¥**: ì™¸ë¶€ ì„¤ì • ì—†ì´ `npm test` í•œ ë²ˆìœ¼ë¡œ ì‹¤í–‰  
âœ… **ì•ˆì •ì **: ì™¸ë¶€ ì˜ì¡´ì„± ì œê±°ë¡œ 95%+ ì„±ê³µë¥   
âœ… **ë¹ ë¦„**: í•µì‹¬ í…ŒìŠ¤íŠ¸ë§Œ 3ë¶„ ë‚´ ì™„ë£Œ  
âœ… **í™•ì¥ ê°€ëŠ¥**: í•„ìš”ì‹œ í™•ì¥ í…ŒìŠ¤íŠ¸ ì¶”ê°€ ì‹¤í–‰  

---

**ì´ ì‘ì—… ì‹œê°„**: ~2ì‹œê°„  
**ì˜í–¥ë°›ëŠ” íŒŒì¼**: 8ê°œ  
**ì¶”ê°€ëœ í…ŒìŠ¤íŠ¸ ì•ˆì •ì„±**: 95%+  
**CI/CD ì‹œê°„ ë‹¨ì¶•**: 70%  
