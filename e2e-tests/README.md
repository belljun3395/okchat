# OKChat E2E Tests

Playwright ê¸°ë°˜ì˜ End-to-End í…ŒìŠ¤íŠ¸ ì‹œìŠ¤í…œì…ë‹ˆë‹¤. í™”ë©´ì˜ ê¸°ëŠ¥ë“¤ì„ ìë™ìœ¼ë¡œ ê²€ì¦í•©ë‹ˆë‹¤.

## ğŸ“‹ ëª©ì°¨

- [ì„¤ì¹˜](#ì„¤ì¹˜)
- [í…ŒìŠ¤íŠ¸ ì‹¤í–‰](#í…ŒìŠ¤íŠ¸-ì‹¤í–‰)
- [í…ŒìŠ¤íŠ¸ êµ¬ì¡°](#í…ŒìŠ¤íŠ¸-êµ¬ì¡°)
- [Page Objects](#page-objects)
- [CI/CD í†µí•©](#cicd-í†µí•©)
- [ë¬¸ì œ í•´ê²°](#ë¬¸ì œ-í•´ê²°)

## ğŸš€ ì„¤ì¹˜

### ì‚¬ì „ ìš”êµ¬ì‚¬í•­

- Node.js 18.0.0 ì´ìƒ
- Java 17 (Spring Boot ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰ìš©)
- npm ë˜ëŠ” yarn

### ì„¤ì¹˜ ë‹¨ê³„

```bash
# e2e-tests ë””ë ‰í† ë¦¬ë¡œ ì´ë™
cd e2e-tests

# ì˜ì¡´ì„± ì„¤ì¹˜
npm install

# Playwright ë¸Œë¼ìš°ì € ì„¤ì¹˜
npx playwright install --with-deps
```

### í™˜ê²½ ì„¤ì •

1. `.env` íŒŒì¼ ìƒì„±:
```bash
cp .env.example .env
```

2. í•„ìš”ì— ë”°ë¼ `.env` íŒŒì¼ ìˆ˜ì •

## ğŸ§ª í…ŒìŠ¤íŠ¸ ì‹¤í–‰

### Spring Boot ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹œì‘

í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•˜ê¸° ì „ì— Spring Boot ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì‹¤í–‰ ì¤‘ì´ì–´ì•¼ í•©ë‹ˆë‹¤:

```bash
# í”„ë¡œì íŠ¸ ë£¨íŠ¸ì—ì„œ
./gradlew bootRun
```

### í…ŒìŠ¤íŠ¸ ëª…ë ¹ì–´

```bash
# ëª¨ë“  í…ŒìŠ¤íŠ¸ ì‹¤í–‰
npm test

# íŠ¹ì • ë¸Œë¼ìš°ì €ì—ì„œ í…ŒìŠ¤íŠ¸
npm run test:chrome
npm run test:firefox
npm run test:webkit

# UI ëª¨ë“œë¡œ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ (ì‹œê°ì  ë””ë²„ê¹…)
npm run test:ui

# ë””ë²„ê·¸ ëª¨ë“œë¡œ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
npm run test:debug

# íŠ¹ì • í…ŒìŠ¤íŠ¸ íŒŒì¼/í´ë” ì‹¤í–‰
npm test tests/chat
npm test tests/permissions

# Smoke í…ŒìŠ¤íŠ¸ë§Œ ì‹¤í–‰
npm test tests/smoke

# í…ŒìŠ¤íŠ¸ ë¦¬í¬íŠ¸ í™•ì¸
npm run test:report
```

### ìŠ¤í¬ë¦½íŠ¸ë¥¼ í†µí•œ ì‹¤í–‰

í¸ì˜ë¥¼ ìœ„í•œ ì‰˜ ìŠ¤í¬ë¦½íŠ¸ë„ ì œê³µë©ë‹ˆë‹¤:

```bash
# ê¸°ë³¸ ì‹¤í–‰ (Chromium)
./scripts/run-tests.sh

# Firefoxì—ì„œ í—¤ë“œ ëª¨ë“œë¡œ ì‹¤í–‰
./scripts/run-tests.sh -b firefox -h

# ì±„íŒ… í…ŒìŠ¤íŠ¸ë§Œ ë””ë²„ê·¸ ëª¨ë“œë¡œ ì‹¤í–‰
./scripts/run-tests.sh -t chat -d

# Smoke í…ŒìŠ¤íŠ¸ ì‹¤í–‰
./scripts/run-tests.sh -s
```

## ğŸ“ í…ŒìŠ¤íŠ¸ êµ¬ì¡°

```
e2e-tests/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ pages/          # Page Object í´ë˜ìŠ¤ë“¤
â”‚   â”‚   â”œâ”€â”€ BasePage.ts
â”‚   â”‚   â”œâ”€â”€ ChatPage.ts
â”‚   â”‚   â”œâ”€â”€ PermissionsPage.ts
â”‚   â”‚   â””â”€â”€ PermissionManagerPage.ts
â”‚   â”œâ”€â”€ fixtures/       # í…ŒìŠ¤íŠ¸ í”½ìŠ¤ì²˜
â”‚   â”‚   â””â”€â”€ test-fixtures.ts
â”‚   â”œâ”€â”€ utils/          # ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
â”‚   â”‚   â””â”€â”€ test-helpers.ts
â”‚   â””â”€â”€ types/          # TypeScript íƒ€ì… ì •ì˜
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ chat/           # ì±„íŒ… ê´€ë ¨ í…ŒìŠ¤íŠ¸
â”‚   â”‚   â”œâ”€â”€ chat.spec.ts
â”‚   â”‚   â””â”€â”€ chat-error.spec.ts
â”‚   â”œâ”€â”€ permissions/    # ê¶Œí•œ ê´€ë¦¬ í…ŒìŠ¤íŠ¸
â”‚   â”‚   â”œâ”€â”€ permissions-index.spec.ts
â”‚   â”‚   â””â”€â”€ permission-manager.spec.ts
â”‚   â””â”€â”€ smoke/          # Smoke í…ŒìŠ¤íŠ¸
â”‚       â””â”€â”€ smoke.spec.ts
â”œâ”€â”€ playwright.config.ts # Playwright ì„¤ì •
â””â”€â”€ package.json
```

## ğŸ“„ Page Objects

Page Object Patternì„ ì‚¬ìš©í•˜ì—¬ í…ŒìŠ¤íŠ¸ ì½”ë“œì˜ ìœ ì§€ë³´ìˆ˜ì„±ì„ ë†’ì˜€ìŠµë‹ˆë‹¤.

### BasePage

ëª¨ë“  Page Objectì˜ ê¸°ë³¸ í´ë˜ìŠ¤:
- ê³µí†µ ê¸°ëŠ¥ (navigation, wait, screenshot ë“±)
- ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ë©”ì„œë“œ

### ChatPage

ì±„íŒ… í™”ë©´ ê´€ë ¨ ê¸°ëŠ¥:
- ë©”ì‹œì§€ ì „ì†¡/ìˆ˜ì‹ 
- ì‹¬ì¸µ ë¶„ì„ ëª¨ë“œ
- í‚¤ì›Œë“œ ê²€ìƒ‰
- ë§ˆí¬ë‹¤ìš´ ë Œë”ë§ ê²€ì¦

### PermissionsPage

ê¶Œí•œ ê´€ë¦¬ ëŒ€ì‹œë³´ë“œ:
- í†µê³„ í™•ì¸
- ì‚¬ìš©ì ëª©ë¡
- ë¹ ë¥¸ ë§í¬ ë„¤ë¹„ê²Œì´ì…˜

### PermissionManagerPage

ê¶Œí•œ ìƒì„¸ ê´€ë¦¬:
- ì‚¬ìš©ì ê²€ìƒ‰/ì„ íƒ
- íŠ¸ë¦¬ êµ¬ì¡° ê¶Œí•œ ê´€ë¦¬
- ê¶Œí•œ ì €ì¥

## ğŸ”§ CI/CD í†µí•©

GitHub Actionsë¥¼ í†µí•œ ìë™í™”ëœ í…ŒìŠ¤íŠ¸ê°€ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

### ì‹¤í–‰ ì¡°ê±´

- `main`, `develop` ë¸Œëœì¹˜ push
- Pull Request
- ë§¤ì¼ ì˜¤ì „ 2ì‹œ (ìŠ¤ì¼€ì¤„)
- ìˆ˜ë™ ì‹¤í–‰

### í…ŒìŠ¤íŠ¸ ë§¤íŠ¸ë¦­ìŠ¤

- ë¸Œë¼ìš°ì €: Chromium, Firefox, WebKit
- ë³‘ë ¬ ì‹¤í–‰ìœ¼ë¡œ ë¹ ë¥¸ í”¼ë“œë°±

### ì•„í‹°íŒ©íŠ¸

í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨ ì‹œ:
- ìŠ¤í¬ë¦°ìƒ·
- ë¹„ë””ì˜¤ ë…¹í™”
- íŠ¸ë ˆì´ìŠ¤ íŒŒì¼
- JUnit ë¦¬í¬íŠ¸

## ğŸ› ë¬¸ì œ í•´ê²°

### ì¼ë°˜ì ì¸ ë¬¸ì œ

1. **í…ŒìŠ¤íŠ¸ ì‹œì‘ ì‹¤íŒ¨**
   - Spring Boot ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì‹¤í–‰ ì¤‘ì¸ì§€ í™•ì¸
   - `http://localhost:8080` ì ‘ì† ê°€ëŠ¥í•œì§€ í™•ì¸

2. **ë¸Œë¼ìš°ì € ì‹¤í–‰ ì˜¤ë¥˜**
   ```bash
   # ë¸Œë¼ìš°ì € ì¬ì„¤ì¹˜
   npx playwright install --force
   ```

3. **íƒ€ì„ì•„ì›ƒ ì˜¤ë¥˜**
   - ë„¤íŠ¸ì›Œí¬ ìƒíƒœ í™•ì¸
   - `playwright.config.ts`ì—ì„œ íƒ€ì„ì•„ì›ƒ ê°’ ì¡°ì •

4. **ê¶Œí•œ ì˜¤ë¥˜ (Linux/Mac)**
   ```bash
   chmod +x scripts/run-tests.sh
   ```

### ë””ë²„ê¹… íŒ

1. **UI ëª¨ë“œ ì‚¬ìš©**
   ```bash
   npm run test:ui
   ```
   ì‹œê°ì ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ê³¼ì •ì„ í™•ì¸

2. **íŠ¸ë ˆì´ìŠ¤ í™•ì¸**
   ```bash
   npx playwright show-trace trace.zip
   ```
   ì‹¤íŒ¨í•œ í…ŒìŠ¤íŠ¸ì˜ ìƒì„¸ ì •ë³´ í™•ì¸

3. **ìŠ¤í¬ë¦°ìƒ· í™•ì¸**
   `test-results/screenshots/` ë””ë ‰í† ë¦¬ í™•ì¸

4. **ë¡œê·¸ ë ˆë²¨ ì¡°ì •**
   ```bash
   DEBUG=pw:api npm test
   ```

## ğŸ“Š í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€

### í˜„ì¬ í…ŒìŠ¤íŠ¸ ë²”ìœ„

- âœ… ì±„íŒ… ì¸í„°í˜ì´ìŠ¤
  - ë©”ì‹œì§€ ì†¡ìˆ˜ì‹ 
  - ë§ˆí¬ë‹¤ìš´ ë Œë”ë§
  - ì½”ë“œ ë¸”ë¡ ë³µì‚¬
  - ì—ëŸ¬ ì²˜ë¦¬
  
- âœ… ê¶Œí•œ ê´€ë¦¬
  - ëŒ€ì‹œë³´ë“œ í‘œì‹œ
  - ì‚¬ìš©ì ê´€ë¦¬
  - ê¶Œí•œ íŠ¸ë¦¬ ì¡°ì‘
  - ì €ì¥ ê¸°ëŠ¥

- âœ… Smoke í…ŒìŠ¤íŠ¸
  - í˜ì´ì§€ ë¡œë”©
  - ê¸°ë³¸ ë„¤ë¹„ê²Œì´ì…˜
  - API í—¬ìŠ¤ ì²´í¬

## ğŸ¤ ê¸°ì—¬í•˜ê¸°

ìƒˆë¡œìš´ í…ŒìŠ¤íŠ¸ ì¶”ê°€ ì‹œ:

1. ì ì ˆí•œ ë””ë ‰í† ë¦¬ì— `.spec.ts` íŒŒì¼ ìƒì„±
2. Page Objectê°€ í•„ìš”í•œ ê²½ìš° `src/pages/`ì— ì¶”ê°€
3. ê³µí†µ ìœ í‹¸ë¦¬í‹°ëŠ” `src/utils/`ì— ì¶”ê°€
4. í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ë° ê²€ì¦
5. PR ìƒì„±

## ğŸ“ ì§€ì›

ë¬¸ì œê°€ ìˆê±°ë‚˜ ì§ˆë¬¸ì´ ìˆìœ¼ë©´ ì´ìŠˆë¥¼ ìƒì„±í•´ì£¼ì„¸ìš”.